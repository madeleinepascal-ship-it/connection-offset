<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Connection Maxxing Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            font-size: 14px;
            transition: color 0.2s;
        }

        .back-link:hover {
            color: #ffffff;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
            padding-top: 20px;
        }

        h1 {
            font-size: 56px;
            font-weight: 800;
            margin-bottom: 12px;
            line-height: 1.2;
            color: #ffffff;
            text-shadow: 0 2px 20px rgba(0,0,0,0.2);
        }

        .tagline {
            font-size: 20px;
            color: rgba(255,255,255,0.9);
            font-weight: 500;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 16px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .stat-label {
            font-size: 13px;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: rgba(255,255,255,0.8);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .stat-value {
            font-size: 36px;
            font-weight: 800;
            color: #ffffff;
        }

        .stat-subtext {
            font-size: 13px;
            color: rgba(255,255,255,0.7);
            margin-top: 4px;
        }

        .rings-section {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .section-title {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 24px;
            text-align: center;
        }

        .rings-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 32px;
            position: relative;
            height: 300px;
        }

        .center-stats {
            position: absolute;
            text-align: center;
            z-index: 10;
        }

        .today-points {
            font-size: 48px;
            font-weight: 800;
            color: #ffffff;
            line-height: 1;
        }

        .points-label {
            font-size: 14px;
            color: rgba(255,255,255,0.8);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 4px;
        }

        .ring-legend {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .ring-item {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .ring-color {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: 4px solid;
        }

        .ring-quick { border-color: #FF006E; }
        .ring-deep { border-color: #8338EC; }
        .ring-community { border-color: #3A86FF; }

        .ring-info {
            flex: 1;
        }

        .ring-name {
            font-weight: 600;
            font-size: 15px;
        }

        .ring-progress-text {
            font-size: 13px;
            color: rgba(255,255,255,0.8);
        }

        .activity-section {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 32px;
            margin-bottom: 32px;
            border: 1px solid rgba(255,255,255,0.2);
        }

        .log-form {
            display: grid;
            gap: 20px;
            margin-bottom: 24px;
        }

        label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 8px;
            color: rgba(255,255,255,0.9);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        select, input {
            width: 100%;
            padding: 14px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 12px;
            font-size: 16px;
            background: rgba(255,255,255,0.1);
            color: #ffffff;
            transition: all 0.2s;
            font-family: 'Inter', sans-serif;
        }

        select:focus, input:focus {
            outline: none;
            border-color: rgba(255,255,255,0.6);
            background: rgba(255,255,255,0.15);
        }

        select option {
            background: #764ba2;
            color: #ffffff;
        }

        .time-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        button {
            background: #ffffff;
            color: #667eea;
            border: none;
            padding: 16px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        button:active {
            transform: translateY(0);
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 16px;
            margin-top: 20px;
        }

        .achievement {
            background: rgba(255,255,255,0.1);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .achievement.unlocked {
            border-color: #FFD700;
            background: rgba(255,215,0,0.1);
        }

        .achievement-icon {
            font-size: 36px;
            margin-bottom: 8px;
            filter: grayscale(1);
            opacity: 0.4;
        }

        .achievement.unlocked .achievement-icon {
            filter: grayscale(0);
            opacity: 1;
        }

        .achievement-name {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .achievement-desc {
            font-size: 11px;
            color: rgba(255,255,255,0.7);
        }

        .activity-log {
            margin-top: 32px;
        }

        .log-entry {
            background: rgba(255,255,255,0.1);
            padding: 16px;
            border-radius: 12px;
            margin-bottom: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .log-entry-info {
            flex: 1;
        }

        .log-entry-name {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 15px;
        }

        .log-entry-details {
            font-size: 13px;
            color: rgba(255,255,255,0.7);
        }

        .log-entry-points {
            font-size: 24px;
            font-weight: 800;
            margin-right: 12px;
            color: #FFD700;
        }

        .delete-btn {
            background: rgba(255,0,0,0.3);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 13px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .delete-btn:hover {
            background: rgba(255,0,0,0.5);
            transform: none;
            box-shadow: none;
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: rgba(255,255,255,0.6);
            font-style: italic;
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 36px;
            }

            .rings-container {
                height: 250px;
            }

            .today-points {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="home.html" class="back-link">‚Üê Back to Home</a>

        <header>
            <h1>Connection Maxxing</h1>
            <p class="tagline">Track real human connections like you track steps</p>
        </header>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-label">Current Streak</div>
                <div class="stat-value" id="currentStreak">0</div>
                <div class="stat-subtext">days</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Total Points</div>
                <div class="stat-value" id="totalPoints">0</div>
                <div class="stat-subtext">all time</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Level</div>
                <div class="stat-value" id="currentLevel">1</div>
                <div class="stat-subtext" id="nextLevelText">0/100 to next</div>
            </div>
        </div>

        <div class="rings-section">
            <h2 class="section-title">Today's Connection Rings</h2>

            <div class="rings-container">
                <svg width="280" height="280" style="position: absolute;">
                    <circle cx="140" cy="140" r="126" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="28"/>
                    <circle id="outerRing" cx="140" cy="140" r="126" fill="none" stroke="#FF006E" stroke-width="28"
                            stroke-dasharray="0 1000" stroke-linecap="round" transform="rotate(-90 140 140)"/>
                </svg>
                <svg width="210" height="210" style="position: absolute;">
                    <circle cx="105" cy="105" r="93" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="24"/>
                    <circle id="middleRing" cx="105" cy="105" r="93" fill="none" stroke="#8338EC" stroke-width="24"
                            stroke-dasharray="0 1000" stroke-linecap="round" transform="rotate(-90 105 105)"/>
                </svg>
                <svg width="150" height="150" style="position: absolute;">
                    <circle cx="75" cy="75" r="65" fill="none" stroke="rgba(255,255,255,0.2)" stroke-width="20"/>
                    <circle id="innerRing" cx="75" cy="75" r="65" fill="none" stroke="#3A86FF" stroke-width="20"
                            stroke-dasharray="0 1000" stroke-linecap="round" transform="rotate(-90 75 75)"/>
                </svg>
                <div class="center-stats">
                    <div class="today-points" id="todayPoints">0</div>
                    <div class="points-label">Points Today</div>
                </div>
            </div>

            <div class="ring-legend">
                <div class="ring-item">
                    <div class="ring-color ring-quick"></div>
                    <div class="ring-info">
                        <div class="ring-name">Quick Connections</div>
                        <div class="ring-progress-text" id="quickProgress">0/30 min</div>
                    </div>
                </div>
                <div class="ring-item">
                    <div class="ring-color ring-deep"></div>
                    <div class="ring-info">
                        <div class="ring-name">Deep Connections</div>
                        <div class="ring-progress-text" id="deepProgress">0/60 min</div>
                    </div>
                </div>
                <div class="ring-item">
                    <div class="ring-color ring-community"></div>
                    <div class="ring-info">
                        <div class="ring-name">Community Connections</div>
                        <div class="ring-progress-text" id="communityProgress">0/30 min</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="activity-section">
            <h2 class="section-title">Log a Connection</h2>

            <form class="log-form" onsubmit="logConnection(event)">
                <div>
                    <label for="connectionType">Connection Type</label>
                    <select id="connectionType" required onchange="updateActivityOptions()">
                        <option value="quick">Quick Connection (calls, texts, brief chats)</option>
                        <option value="deep">Deep Connection (meals, hangouts, quality time)</option>
                        <option value="community">Community Connection (groups, events, gatherings)</option>
                    </select>
                </div>

                <div>
                    <label for="activity">Activity</label>
                    <select id="activity" required>
                        <option value="Phone call">Phone call</option>
                        <option value="Video call">Video call</option>
                        <option value="Text conversation">Text conversation</option>
                        <option value="Quick coffee">Quick coffee</option>
                        <option value="Brief chat">Brief chat</option>
                    </select>
                </div>

                <div class="time-inputs">
                    <div>
                        <label for="hours">Hours</label>
                        <input type="number" id="hours" min="0" max="24" value="0" required>
                    </div>
                    <div>
                        <label for="minutes">Minutes</label>
                        <input type="number" id="minutes" min="0" max="59" value="15" required>
                    </div>
                </div>

                <button type="submit">Log Connection</button>
            </form>

            <div class="activity-log">
                <h2 class="section-title">Recent Connections</h2>
                <div id="logList">
                    <div class="empty-state">Start logging your connections to see them here</div>
                </div>
            </div>
        </div>

        <div class="activity-section">
            <h2 class="section-title">Achievements</h2>
            <div class="achievements-grid" id="achievementsGrid"></div>
        </div>
    </div>

    <script>
        // Activity options for each connection type
        const activityOptions = {
            quick: [
                'Phone call',
                'Video call',
                'Text conversation',
                'Quick coffee',
                'Brief chat',
                'Voice message exchange',
                'Quick catch-up'
            ],
            deep: [
                'Meal together',
                'Long conversation',
                'Movie/show together',
                'Walk & talk',
                'Game night',
                'Heart-to-heart',
                'Quality hangout',
                'Road trip',
                'Day out together'
            ],
            community: [
                'Group hangout',
                'Community event',
                'Class/workshop',
                'Sports/recreation',
                'Volunteer work',
                'Party/gathering',
                'Book club',
                'Meetup group',
                'Religious service',
                'Networking event',
                'Group project'
            ]
        };

        // Ring goals in minutes
        const ringGoals = {
            quick: 30,
            deep: 60,
            community: 30
        };

        // Points per minute for each type
        const pointsPerMinute = {
            quick: 2,
            deep: 3,
            community: 4
        };

        // Achievements
        const achievements = [
            { id: 'first_connection', name: 'First Step', desc: 'Log your first connection', icon: 'üå±', condition: (data) => data.totalConnections >= 1 },
            { id: 'close_ring', name: 'Ring Closer', desc: 'Close any ring', icon: '‚≠ï', condition: (data) => data.ringsClosedTotal >= 1 },
            { id: 'close_all_rings', name: 'Triple Threat', desc: 'Close all 3 rings in one day', icon: 'üéØ', condition: (data) => data.perfectDays >= 1 },
            { id: 'week_streak', name: 'Consistent', desc: '7 day streak', icon: 'üî•', condition: (data) => data.maxStreak >= 7 },
            { id: 'level_5', name: 'Rising Star', desc: 'Reach level 5', icon: '‚≠ê', condition: (data) => data.level >= 5 },
            { id: 'level_10', name: 'Social Butterfly', desc: 'Reach level 10', icon: 'ü¶ã', condition: (data) => data.level >= 10 },
            { id: '50_connections', name: 'Networker', desc: '50 connections logged', icon: 'üåê', condition: (data) => data.totalConnections >= 50 },
            { id: '1000_points', name: 'Point Master', desc: 'Earn 1000 points', icon: 'üíé', condition: (data) => data.totalPoints >= 1000 }
        ];

        let connections = [];
        let stats = {
            totalPoints: 0,
            currentStreak: 0,
            maxStreak: 0,
            lastConnectionDate: null,
            totalConnections: 0,
            ringsClosedTotal: 0,
            perfectDays: 0,
            level: 1,
            unlockedAchievements: []
        };

        // Load saved data
        function loadData() {
            const savedConnections = localStorage.getItem('connectionMaxxing');
            const savedStats = localStorage.getItem('connectionMaxxingStats');

            if (savedConnections) {
                connections = JSON.parse(savedConnections);
            }

            if (savedStats) {
                stats = JSON.parse(savedStats);
            }

            updateDisplay();
        }

        // Save data
        function saveData() {
            localStorage.setItem('connectionMaxxing', JSON.stringify(connections));
            localStorage.setItem('connectionMaxxingStats', JSON.stringify(stats));
        }

        // Update activity dropdown based on connection type
        function updateActivityOptions() {
            const type = document.getElementById('connectionType').value;
            const activitySelect = document.getElementById('activity');

            activitySelect.innerHTML = activityOptions[type]
                .map(activity => `<option value="${activity}">${activity}</option>`)
                .join('');
        }

        // Calculate level from total points
        function calculateLevel(points) {
            return Math.floor(points / 100) + 1;
        }

        // Get today's date string
        function getTodayString() {
            return new Date().toISOString().split('T')[0];
        }

        // Calculate streak
        function updateStreak() {
            const today = getTodayString();
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayString = yesterday.toISOString().split('T')[0];

            if (stats.lastConnectionDate === today) {
                // Already logged today, streak continues
                return;
            } else if (stats.lastConnectionDate === yesterdayString) {
                // Logged yesterday, increment streak
                stats.currentStreak++;
            } else if (stats.lastConnectionDate === null) {
                // First ever connection
                stats.currentStreak = 1;
            } else {
                // Missed days, reset streak
                stats.currentStreak = 1;
            }

            stats.lastConnectionDate = today;
            stats.maxStreak = Math.max(stats.maxStreak, stats.currentStreak);
        }

        // Log a connection
        function logConnection(event) {
            event.preventDefault();

            const type = document.getElementById('connectionType').value;
            const activity = document.getElementById('activity').value;
            const hours = parseInt(document.getElementById('hours').value);
            const minutes = parseInt(document.getElementById('minutes').value);

            if (hours === 0 && minutes === 0) {
                alert('Please enter a duration greater than 0');
                return;
            }

            const totalMinutes = (hours * 60) + minutes;
            const points = totalMinutes * pointsPerMinute[type];

            const connection = {
                id: Date.now(),
                type: type,
                activity: activity,
                minutes: totalMinutes,
                points: points,
                timestamp: new Date().toISOString()
            };

            connections.push(connection);

            // Update stats
            stats.totalConnections++;
            stats.totalPoints += points;
            stats.level = calculateLevel(stats.totalPoints);
            updateStreak();

            // Check for ring closures and perfect days
            checkRingClosures();

            saveData();
            updateDisplay();

            // Reset form
            document.getElementById('hours').value = 0;
            document.getElementById('minutes').value = 15;

            // Show celebration for level up
            checkAchievements();
        }

        // Check if rings are closed
        function checkRingClosures() {
            const today = getTodayString();
            const todayConnections = connections.filter(c =>
                c.timestamp.startsWith(today)
            );

            const minutesByType = {
                quick: 0,
                deep: 0,
                community: 0
            };

            todayConnections.forEach(c => {
                minutesByType[c.type] += c.minutes;
            });

            let ringsClosedToday = 0;
            Object.keys(ringGoals).forEach(type => {
                if (minutesByType[type] >= ringGoals[type]) {
                    ringsClosedToday++;
                }
            });

            if (ringsClosedToday === 3) {
                const perfectDayDates = new Set();
                connections.forEach(c => {
                    const date = c.timestamp.split('T')[0];
                    // Recalculate for each day
                    const dayConnections = connections.filter(conn =>
                        conn.timestamp.startsWith(date)
                    );
                    const dayMinutes = {quick: 0, deep: 0, community: 0};
                    dayConnections.forEach(conn => {
                        dayMinutes[conn.type] += conn.minutes;
                    });
                    if (dayMinutes.quick >= ringGoals.quick &&
                        dayMinutes.deep >= ringGoals.deep &&
                        dayMinutes.community >= ringGoals.community) {
                        perfectDayDates.add(date);
                    }
                });
                stats.perfectDays = perfectDayDates.size;
            }

            // Count total rings closed
            stats.ringsClosedTotal = Math.max(stats.ringsClosedTotal, ringsClosedToday);
        }

        // Check and unlock achievements
        function checkAchievements() {
            achievements.forEach(achievement => {
                if (!stats.unlockedAchievements.includes(achievement.id)) {
                    if (achievement.condition(stats)) {
                        stats.unlockedAchievements.push(achievement.id);
                        // Could add a notification here
                    }
                }
            });
        }

        // Delete a connection
        function deleteConnection(id) {
            connections = connections.filter(c => c.id !== id);

            // Recalculate stats
            stats.totalPoints = 0;
            stats.totalConnections = connections.length;
            connections.forEach(c => {
                stats.totalPoints += c.points;
            });
            stats.level = calculateLevel(stats.totalPoints);

            saveData();
            updateDisplay();
        }

        // Format time
        function formatTime(minutes) {
            const h = Math.floor(minutes / 60);
            const m = minutes % 60;
            if (h === 0) return `${m}m`;
            if (m === 0) return `${h}h`;
            return `${h}h ${m}m`;
        }

        // Update ring display
        function updateRing(ringId, current, goal, radius) {
            const ring = document.getElementById(ringId);
            const circumference = 2 * Math.PI * radius;
            const progress = Math.min(current / goal, 1);
            const dashArray = `${progress * circumference} ${circumference}`;
            ring.setAttribute('stroke-dasharray', dashArray);
        }

        // Update all displays
        function updateDisplay() {
            // Update stats
            document.getElementById('currentStreak').textContent = stats.currentStreak;
            document.getElementById('totalPoints').textContent = stats.totalPoints.toLocaleString();
            document.getElementById('currentLevel').textContent = stats.level;

            const pointsToNext = 100 - (stats.totalPoints % 100);
            document.getElementById('nextLevelText').textContent = `${pointsToNext} to next`;

            // Get today's connections
            const today = getTodayString();
            const todayConnections = connections.filter(c =>
                c.timestamp.startsWith(today)
            );

            // Calculate today's minutes by type
            const minutesByType = {
                quick: 0,
                deep: 0,
                community: 0
            };

            let todayPoints = 0;
            todayConnections.forEach(c => {
                minutesByType[c.type] += c.minutes;
                todayPoints += c.points;
            });

            document.getElementById('todayPoints').textContent = todayPoints;

            // Update ring progress text
            document.getElementById('quickProgress').textContent =
                `${minutesByType.quick}/${ringGoals.quick} min`;
            document.getElementById('deepProgress').textContent =
                `${minutesByType.deep}/${ringGoals.deep} min`;
            document.getElementById('communityProgress').textContent =
                `${minutesByType.community}/${ringGoals.community} min`;

            // Update ring visuals
            updateRing('outerRing', minutesByType.quick, ringGoals.quick, 126);
            updateRing('middleRing', minutesByType.deep, ringGoals.deep, 93);
            updateRing('innerRing', minutesByType.community, ringGoals.community, 65);

            // Update log list
            const logList = document.getElementById('logList');
            if (connections.length === 0) {
                logList.innerHTML = '<div class="empty-state">Start logging your connections to see them here</div>';
            } else {
                logList.innerHTML = connections
                    .sort((a, b) => b.timestamp.localeCompare(a.timestamp))
                    .slice(0, 20)
                    .map(connection => {
                        const date = new Date(connection.timestamp);
                        return `
                            <div class="log-entry">
                                <div class="log-entry-info">
                                    <div class="log-entry-name">${connection.activity}</div>
                                    <div class="log-entry-details">
                                        ${connection.type.charAt(0).toUpperCase() + connection.type.slice(1)} ‚Ä¢
                                        ${formatTime(connection.minutes)} ‚Ä¢
                                        ${date.toLocaleDateString()} ${date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}
                                    </div>
                                </div>
                                <span class="log-entry-points">+${connection.points}</span>
                                <button class="delete-btn" onclick="deleteConnection(${connection.id})">Delete</button>
                            </div>
                        `;
                    }).join('');
            }

            // Update achievements
            checkAchievements();
            const achievementsGrid = document.getElementById('achievementsGrid');
            achievementsGrid.innerHTML = achievements.map(achievement => {
                const unlocked = stats.unlockedAchievements.includes(achievement.id);
                return `
                    <div class="achievement ${unlocked ? 'unlocked' : ''}">
                        <div class="achievement-icon">${achievement.icon}</div>
                        <div class="achievement-name">${achievement.name}</div>
                        <div class="achievement-desc">${achievement.desc}</div>
                    </div>
                `;
            }).join('');
        }

        // Initialize
        updateActivityOptions();
        loadData();
    </script>
</body>
</html>
